<?xml version="1.0" encoding="utf-8"?>
<!--
This model is designed to test the following kinds of equations:

    dV/dt = 1, V(0) = 1
    dx/dt = 1, dy/dt = -1, x(0) = y(0) = 1
    dx/dt = -y, dy/dt = x, x(0) = 0, y(0) = 1
    dx/dt1 = -y, dy/dt2 = x, t1 = t2, x(0) = 0, y(0) = 1

The last case checks whether connecting 'time' across components will work naturally. To check connecting V we could use:

    dV/dt = 1, derived = V1 * 2, V1 = V, V(0) = 1

We will also check some connection features (units conversions, encapsulation) and annotations.

-->
<model name="test_simple_odes" cmeta:id="test_simple_odes"
   xmlns="http://www.cellml.org/cellml/1.0#"
   xmlns:cellml="http://www.cellml.org/cellml/1.0#"
   xmlns:cmeta="http://www.cellml.org/metadata/1.0#">

   <units name="ms">
      <unit units="second" prefix="milli"/>
   </units>
   <units name="per_ms">
      <unit units="ms" exponent="-1"/>
   </units>
   <units name="mV">
      <unit units="volt" prefix="milli"/>
   </units>
   <units name="per_mV">
      <unit units="volt" prefix="milli" exponent="-1"/>
   </units>
   <units name="mV_per_ms">
      <unit units="mV" exponent="1"/>
      <unit units="ms" exponent="-1"/>
   </units>
   <units name="mM">
      <unit prefix="milli" units="mole"/>
      <unit units="litre" exponent="-1"/>
   </units>
   <units name="mM_per_ms">
      <unit units="mM"/>
      <unit units="ms" exponent="-1"/>
   </units>

   <component name="environment">
      <variable name="time" public_interface="out" units="ms" cmeta:id="time">
         <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
            <rdf:Description rdf:about="#time">
               <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#time"/>
            </rdf:Description>
         </rdf:RDF>
      </variable>
   </component>

   <component name="single_independent_ode">
      <!-- d(sv1)/d(time) = 1, sv1(0) = 1 -->
      <variable name="time" public_interface="in" units="ms"/>
      <variable name="sv1" units="mV" cmeta:id="sv11" initial_value="1">
         <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
            <rdf:Description rdf:about="#sv11">
               <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#sodium_reversal_potential"/>
            </rdf:Description>
         </rdf:RDF>
      </variable>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
         <apply>
            <eq/>
            <apply>
               <diff/>
               <bvar>
                  <ci>time</ci>
               </bvar>
               <ci>sv1</ci>
            </apply>
            <cn cellml:units="mV_per_ms">1</cn>
         </apply>
      </math>
   </component>

   <component name="single_ode_rhs_const_var">
      <!-- d(sv1)/d(time) = a, sv1(0) = 1 -->
      <variable name="time" public_interface="in" units="ms"/>
      <variable name="sv1" units="mV" cmeta:id="sv12" initial_value="1">
         <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
            <rdf:Description rdf:about="#sv12">
               <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#potassium_reversal_potential"/>
            </rdf:Description>
         </rdf:RDF>
      </variable>
      <variable name="a" units="mV_per_ms" initial_value="1" cmeta:id="a1"/>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
         <apply>
            <eq/>
            <apply>
               <diff/>
               <bvar>
                  <ci>time</ci>
               </bvar>
               <ci>sv1</ci>
            </apply>
            <ci>a</ci>
         </apply>
      </math>
   </component>

   <component name="single_ode_rhs_computed_var">
      <!-- d(sv1)/d(time) = a, sv1(0) = 1 -->
      <variable name="time" public_interface="in" units="ms"/>
      <variable name="sv1" units="mV" cmeta:id="sv13" initial_value="1">
         <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
            <rdf:Description rdf:about="#sv13">
               <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#calcium_reversal_potential"/>
            </rdf:Description>
         </rdf:RDF>
      </variable>
      <variable name="a" units="mV_per_ms" cmeta:id="a2"/>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
         <apply>
            <eq/>
            <apply>
               <diff/>
               <bvar>
                  <ci>time</ci>
               </bvar>
               <ci>sv1</ci>
            </apply>
            <ci>a</ci>
         </apply>
         <apply><eq/>
            <ci>a</ci>
            <cn cellml:units="mV_per_ms">-1</cn>
         </apply>
      </math>
   </component>

   <!--
      This trio of components define a coupled pair of ODEs, encapsulated within a parent:
      dx/dt = -y, dy/dt = x, x(0) = 0, y(0) = 1
    -->
   <component name="circle_parent">
      <variable name="time" public_interface="in" private_interface="out" units="ms"/>
      <variable name="x" units="mM" private_interface="in"/>
      <variable name="y" units="mM" private_interface="in"/>
   </component>
   <component name="circle_x">
      <variable name="time" public_interface="in" units="ms"/>
      <variable name="x" units="mM" cmeta:id="x1" initial_value="0" public_interface="out"/>
      <variable name="y" units="mM" public_interface="in">
         <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
            <rdf:Description rdf:about="#x1">
               <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#cytosolic_calcium_concentration"/>
            </rdf:Description>
         </rdf:RDF>
      </variable>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
         <apply>
            <eq/>
            <apply>
               <diff/>
               <bvar>
                  <ci>time</ci>
               </bvar>
               <ci>x</ci>
            </apply>
            <apply><minus/>
               <apply><times/>
                  <ci>y</ci>
                  <cn cellml:units="per_ms">1</cn>
               </apply>
            </apply>
         </apply>
      </math>
   </component>
   <component name="circle_y">
      <variable name="time" public_interface="in" units="ms"/>
      <variable name="y" units="mM" cmeta:id="y1" initial_value="1" public_interface="out"/>
      <variable name="x" units="mM" public_interface="in"/>
      <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
         <rdf:Description rdf:about="#y1">
            <bqbiol:is rdf:resource="https://chaste.comlab.ox.ac.uk/cellml/ns/oxford-metadata#extracellular_calcium_concentration"/>
         </rdf:Description>
      </rdf:RDF>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
         <apply>
            <eq/>
            <apply>
               <diff/>
               <bvar>
                  <ci>time</ci>
               </bvar>
               <ci>y</ci>
            </apply>
            <apply><times/>
               <ci>x</ci>
               <cn cellml:units="per_ms">1</cn>
            </apply>
         </apply>
      </math>
   </component>

   <!-- Encapsulation hierarchy - non-mentioned components are top-level -->
   <group>
      <relationship_ref relationship="encapsulation"/>
      <component_ref component="circle_parent">
         <component_ref component="circle_x"/>
         <component_ref component="circle_y"/>
      </component_ref>
   </group>

   <connection>
      <map_components component_1="single_independent_ode" component_2="environment"/>
      <map_variables variable_1="time" variable_2="time"/>
   </connection>
   <connection>
      <map_components component_1="single_ode_rhs_const_var" component_2="environment"/>
      <map_variables variable_1="time" variable_2="time"/>
   </connection>
   <connection>
      <map_components component_1="single_ode_rhs_computed_var" component_2="environment"/>
      <map_variables variable_1="time" variable_2="time"/>
   </connection>

   <connection>
      <map_components component_1="circle_parent" component_2="environment"/>
      <map_variables variable_1="time" variable_2="time"/>
   </connection>
   <connection>
      <map_components component_1="circle_parent" component_2="circle_x"/>
      <map_variables variable_1="time" variable_2="time"/>
      <map_variables variable_1="x" variable_2="x"/>
   </connection>
   <connection>
      <map_components component_1="circle_parent" component_2="circle_y"/>
      <map_variables variable_1="time" variable_2="time"/>
      <map_variables variable_1="y" variable_2="y"/>
   </connection>
   <connection>
      <map_components component_1="circle_x" component_2="circle_y"/>
      <map_variables variable_1="x" variable_2="x"/>
      <map_variables variable_1="y" variable_2="y"/>
   </connection>

   <!-- RDF can appear outside components too -->
   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
            xmlns:bqbiol="http://biomodels.net/biology-qualifiers/">
      <rdf:Description rdf:about="#a1">
         <bqbiol:is rdf:resource="urn:test-ns#parameter_a1"/>
      </rdf:Description>
   </rdf:RDF>
    
</model>
